import{a as E}from"./axios-4b953329.js";var C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},T={},j={get exports(){return T},set exports(a){T=a}};/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */(function(a,o){(function(f,g,b){var h=function(e,t,n){n=r.extend({},r.options,n);var s=r.runValidations(e,t,n);if(s.some(function(c){return r.isPromise(c.error)}))throw new Error("Use validate.async if you want support for promises");return h.processValidationResults(s,n)},r=h;r.extend=function(e){return[].slice.call(arguments,1).forEach(function(t){for(var n in t)e[n]=t[n]}),e},r.extend(h,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var e=r.format("%{major}.%{minor}.%{patch}",r.version);return r.isEmpty(r.version.metadata)||(e+="+"+r.version.metadata),e}},Promise:typeof Promise<"u"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(e,t,n){var s=[],c,i,u,l,d,m,y;(r.isDomElement(e)||r.isJqueryElement(e))&&(e=r.collectFormValues(e));for(c in t){u=r.getDeepObjectValue(e,c),l=r.result(t[c],u,e,c,n,t);for(i in l){if(d=r.validators[i],!d)throw y=r.format("Unknown validator %{name}",{name:i}),new Error(y);m=l[i],m=r.result(m,u,e,c,n,t),m&&s.push({attribute:c,value:u,validator:i,globalOptions:n,attributes:e,options:m,error:d.call(d,u,m,c,e,n)})}}return s},processValidationResults:function(e,t){e=r.pruneEmptyErrors(e,t),e=r.expandMultipleErrors(e,t),e=r.convertErrorMessages(e,t);var n=t.format||"grouped";if(typeof r.formatters[n]=="function")e=r.formatters[n](e);else throw new Error(r.format("Unknown format %{format}",t));return r.isEmpty(e)?void 0:e},async:function(e,t,n){n=r.extend({},r.async.options,n);var s=n.wrapErrors||function(i){return i};n.cleanAttributes!==!1&&(e=r.cleanAttributes(e,t));var c=r.runValidations(e,t,n);return new r.Promise(function(i,u){r.waitForResults(c).then(function(){var l=r.processValidationResults(c,n);l?u(new s(l,n,e,t)):i(e)},function(l){u(l)})})},single:function(e,t,n){return n=r.extend({},r.single.options,n,{format:"flat",fullMessages:!1}),r({single:e},{single:t},n)},waitForResults:function(e){return e.reduce(function(t,n){return r.isPromise(n.error)?t.then(function(){return n.error.then(function(s){n.error=s||null})}):t},new r.Promise(function(t){t()}))},result:function(e){var t=[].slice.call(arguments,1);return typeof e=="function"&&(e=e.apply(null,t)),e},isNumber:function(e){return typeof e=="number"&&!isNaN(e)},isFunction:function(e){return typeof e=="function"},isInteger:function(e){return r.isNumber(e)&&e%1===0},isBoolean:function(e){return typeof e=="boolean"},isObject:function(e){return e===Object(e)},isDate:function(e){return e instanceof Date},isDefined:function(e){return e!=null},isPromise:function(e){return!!e&&r.isFunction(e.then)},isJqueryElement:function(e){return e&&r.isString(e.jquery)},isDomElement:function(e){return!e||!e.querySelectorAll||!e.querySelector?!1:r.isObject(document)&&e===document?!0:typeof HTMLElement=="object"?e instanceof HTMLElement:e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isEmpty:function(e){var t;if(!r.isDefined(e))return!0;if(r.isFunction(e))return!1;if(r.isString(e))return r.EMPTY_STRING_REGEXP.test(e);if(r.isArray(e))return e.length===0;if(r.isDate(e))return!1;if(r.isObject(e)){for(t in e)return!1;return!0}return!1},format:r.extend(function(e,t){return r.isString(e)?e.replace(r.format.FORMAT_REGEXP,function(n,s,c){return s==="%"?"%{"+c+"}":String(t[c])}):e},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(e){return r.isNumber(e)?e*100%1===0?""+e:parseFloat(Math.round(e*100)/100).toFixed(2):r.isArray(e)?e.map(function(t){return r.prettify(t)}).join(", "):r.isObject(e)?r.isDefined(e.toString)?e.toString():JSON.stringify(e):(e=""+e,e.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(t,n,s){return""+n+" "+s.toLowerCase()}).toLowerCase())},stringifyValue:function(e,t){var n=t&&t.prettify||r.prettify;return n(e)},isString:function(e){return typeof e=="string"},isArray:function(e){return{}.toString.call(e)==="[object Array]"},isHash:function(e){return r.isObject(e)&&!r.isArray(e)&&!r.isFunction(e)},contains:function(e,t){return r.isDefined(e)?r.isArray(e)?e.indexOf(t)!==-1:t in e:!1},unique:function(e){return r.isArray(e)?e.filter(function(t,n,s){return s.indexOf(t)==n}):e},forEachKeyInKeypath:function(e,t,n){if(r.isString(t)){var s="",c,i=!1;for(c=0;c<t.length;++c)switch(t[c]){case".":i?(i=!1,s+="."):(e=n(e,s,!1),s="");break;case"\\":i?(i=!1,s+="\\"):i=!0;break;default:i=!1,s+=t[c];break}return n(e,s,!0)}},getDeepObjectValue:function(e,t){if(r.isObject(e))return r.forEachKeyInKeypath(e,t,function(n,s){if(r.isObject(n))return n[s]})},collectFormValues:function(e,t){var n={},s,c,i,u,l,d;if(r.isJqueryElement(e)&&(e=e[0]),!e)return n;for(t=t||{},u=e.querySelectorAll("input[name], textarea[name]"),s=0;s<u.length;++s)if(i=u.item(s),!r.isDefined(i.getAttribute("data-ignored"))){var m=i.name.replace(/\./g,"\\\\.");d=r.sanitizeFormValue(i.value,t),i.type==="number"?d=d?+d:null:i.type==="checkbox"?i.attributes.value?i.checked||(d=n[m]||null):d=i.checked:i.type==="radio"&&(i.checked||(d=n[m]||null)),n[m]=d}for(u=e.querySelectorAll("select[name]"),s=0;s<u.length;++s)if(i=u.item(s),!r.isDefined(i.getAttribute("data-ignored"))){if(i.multiple){d=[];for(c in i.options)l=i.options[c],l&&l.selected&&d.push(r.sanitizeFormValue(l.value,t))}else{var y=typeof i.options[i.selectedIndex]<"u"?i.options[i.selectedIndex].value:"";d=r.sanitizeFormValue(y,t)}n[i.name]=d}return n},sanitizeFormValue:function(e,t){return t.trim&&r.isString(e)&&(e=e.trim()),t.nullify!==!1&&e===""?null:e},capitalize:function(e){return r.isString(e)?e[0].toUpperCase()+e.slice(1):e},pruneEmptyErrors:function(e){return e.filter(function(t){return!r.isEmpty(t.error)})},expandMultipleErrors:function(e){var t=[];return e.forEach(function(n){r.isArray(n.error)?n.error.forEach(function(s){t.push(r.extend({},n,{error:s}))}):t.push(n)}),t},convertErrorMessages:function(e,t){t=t||{};var n=[],s=t.prettify||r.prettify;return e.forEach(function(c){var i=r.result(c.error,c.value,c.attribute,c.options,c.attributes,c.globalOptions);if(!r.isString(i)){n.push(c);return}i[0]==="^"?i=i.slice(1):t.fullMessages!==!1&&(i=r.capitalize(s(c.attribute))+" "+i),i=i.replace(/\\\^/g,"^"),i=r.format(i,{value:r.stringifyValue(c.value,t)}),n.push(r.extend({},c,{error:i}))}),n},groupErrorsByAttribute:function(e){var t={};return e.forEach(function(n){var s=t[n.attribute];s?s.push(n):t[n.attribute]=[n]}),t},flattenErrorsToArray:function(e){return e.map(function(t){return t.error}).filter(function(t,n,s){return s.indexOf(t)===n})},cleanAttributes:function(e,t){function n(i,u,l){return r.isObject(i[u])?i[u]:i[u]=l?!0:{}}function s(i){var u={},l;for(l in i)i[l]&&r.forEachKeyInKeypath(u,l,n);return u}function c(i,u){if(!r.isObject(i))return i;var l=r.extend({},i),d,m;for(m in i)d=u[m],r.isObject(d)?l[m]=c(l[m],d):d||delete l[m];return l}return!r.isObject(t)||!r.isObject(e)?{}:(t=s(t),c(e,t))},exposeModule:function(e,t,n,s,c){n?(s&&s.exports&&(n=s.exports=e),n.validate=e):(t.validate=e,e.isFunction(c)&&c.amd&&c([],function(){return e}))},warn:function(e){typeof console<"u"&&console.warn&&console.warn("[validate.js] "+e)},error:function(e){typeof console<"u"&&console.error&&console.error("[validate.js] "+e)}}),h.validators={presence:function(e,t){if(t=r.extend({},this.options,t),t.allowEmpty!==!1?!r.isDefined(e):r.isEmpty(e))return t.message||this.message||"can't be blank"},length:function(e,t,n){if(r.isDefined(e)){t=r.extend({},this.options,t);var s=t.is,c=t.maximum,i=t.minimum,u=t.tokenizer||function(y){return y},l,d=[];e=u(e);var m=e.length;if(!r.isNumber(m))return t.message||this.notValid||"has an incorrect length";if(r.isNumber(s)&&m!==s&&(l=t.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",d.push(r.format(l,{count:s}))),r.isNumber(i)&&m<i&&(l=t.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",d.push(r.format(l,{count:i}))),r.isNumber(c)&&m>c&&(l=t.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",d.push(r.format(l,{count:c}))),d.length>0)return t.message||d}},numericality:function(e,t,n,s,c){if(r.isDefined(e)){t=r.extend({},this.options,t);var i=[],u,l,d={greaterThan:function(p,x){return p>x},greaterThanOrEqualTo:function(p,x){return p>=x},equalTo:function(p,x){return p===x},lessThan:function(p,x){return p<x},lessThanOrEqualTo:function(p,x){return p<=x},divisibleBy:function(p,x){return p%x===0}},m=t.prettify||c&&c.prettify||r.prettify;if(r.isString(e)&&t.strict){var y="^-?(0|[1-9]\\d*)";if(t.onlyInteger||(y+="(\\.\\d+)?"),y+="$",!new RegExp(y).test(e))return t.message||t.notValid||this.notValid||this.message||"must be a valid number"}if(t.noStrings!==!0&&r.isString(e)&&!r.isEmpty(e)&&(e=+e),!r.isNumber(e))return t.message||t.notValid||this.notValid||this.message||"is not a number";if(t.onlyInteger&&!r.isInteger(e))return t.message||t.notInteger||this.notInteger||this.message||"must be an integer";for(u in d)if(l=t[u],r.isNumber(l)&&!d[u](e,l)){var $="not"+r.capitalize(u),F=t[$]||this[$]||this.message||"must be %{type} %{count}";i.push(r.format(F,{count:l,type:m(u)}))}if(t.odd&&e%2!==1&&i.push(t.notOdd||this.notOdd||this.message||"must be odd"),t.even&&e%2!==0&&i.push(t.notEven||this.notEven||this.message||"must be even"),i.length)return t.message||i}},datetime:r.extend(function(e,t){if(!r.isFunction(this.parse)||!r.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(r.isDefined(e)){t=r.extend({},this.options,t);var n,s=[],c=t.earliest?this.parse(t.earliest,t):NaN,i=t.latest?this.parse(t.latest,t):NaN;if(e=this.parse(e,t),isNaN(e)||t.dateOnly&&e%864e5!==0)return n=t.notValid||t.message||this.notValid||"must be a valid date",r.format(n,{value:arguments[0]});if(!isNaN(c)&&e<c&&(n=t.tooEarly||t.message||this.tooEarly||"must be no earlier than %{date}",n=r.format(n,{value:this.format(e,t),date:this.format(c,t)}),s.push(n)),!isNaN(i)&&e>i&&(n=t.tooLate||t.message||this.tooLate||"must be no later than %{date}",n=r.format(n,{date:this.format(i,t),value:this.format(e,t)}),s.push(n)),s.length)return r.unique(s)}},{parse:null,format:null}),date:function(e,t){return t=r.extend({},t,{dateOnly:!0}),r.validators.datetime.call(r.validators.datetime,e,t)},format:function(e,t){(r.isString(t)||t instanceof RegExp)&&(t={pattern:t}),t=r.extend({},this.options,t);var n=t.message||this.message||"is invalid",s=t.pattern,c;if(r.isDefined(e)&&(!r.isString(e)||(r.isString(s)&&(s=new RegExp(t.pattern,t.flags)),c=s.exec(e),!c||c[0].length!=e.length)))return n},inclusion:function(e,t){if(r.isDefined(e)&&(r.isArray(t)&&(t={within:t}),t=r.extend({},this.options,t),!r.contains(t.within,e))){var n=t.message||this.message||"^%{value} is not included in the list";return r.format(n,{value:e})}},exclusion:function(e,t){if(r.isDefined(e)&&(r.isArray(t)&&(t={within:t}),t=r.extend({},this.options,t),!!r.contains(t.within,e))){var n=t.message||this.message||"^%{value} is restricted";return r.isString(t.within[e])&&(e=t.within[e]),r.format(n,{value:e})}},email:r.extend(function(e,t){t=r.extend({},this.options,t);var n=t.message||this.message||"is not a valid email";if(r.isDefined(e)&&(!r.isString(e)||!this.PATTERN.exec(e)))return n},{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(e,t,n,s,c){if(r.isDefined(e)){r.isString(t)&&(t={attribute:t}),t=r.extend({},this.options,t);var i=t.message||this.message||"is not equal to %{attribute}";if(r.isEmpty(t.attribute)||!r.isString(t.attribute))throw new Error("The attribute must be a non empty string");var u=r.getDeepObjectValue(s,t.attribute),l=t.comparator||function(m,y){return m===y},d=t.prettify||c&&c.prettify||r.prettify;if(!l(e,u,t,n,s))return r.format(i,{attribute:d(t.attribute)})}},url:function(e,t){if(r.isDefined(e)){t=r.extend({},this.options,t);var n=t.message||this.message||"is not a valid url",s=t.schemes||this.schemes||["http","https"],c=t.allowLocal||this.allowLocal||!1,i=t.allowDataUrl||this.allowDataUrl||!1;if(!r.isString(e))return n;var u="^(?:(?:"+s.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",l="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(c?l+="?":u+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",u+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+l+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",i){var d="\\w+\\/[-+.\\w]+(?:;[\\w=]+)*",m="[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*",y="data:(?:"+d+")?(?:;base64)?,"+m;u="(?:"+u+")|(?:^"+y+"$)"}var $=new RegExp(u,"i");if(!$.exec(e))return n}},type:r.extend(function(e,t,n,s,c){if(r.isString(t)&&(t={type:t}),!!r.isDefined(e)){var i=r.extend({},this.options,t),u=i.type;if(!r.isDefined(u))throw new Error("No type was specified");var l;if(r.isFunction(u)?l=u:l=this.types[u],!r.isFunction(l))throw new Error("validate.validators.type.types."+u+" must be a function.");if(!l(e,i,n,s,c)){var d=t.message||this.messages[u]||this.message||i.message||(r.isFunction(u)?"must be of the correct type":"must be of type %{type}");return r.isFunction(d)&&(d=d(e,t,n,s,c)),r.format(d,{attribute:r.prettify(n),type:u})}}},{types:{object:function(e){return r.isObject(e)&&!r.isArray(e)},array:r.isArray,integer:r.isInteger,number:r.isNumber,string:r.isString,date:r.isDate,boolean:r.isBoolean},messages:{}})},h.formatters={detailed:function(e){return e},flat:r.flattenErrorsToArray,grouped:function(e){var t;e=r.groupErrorsByAttribute(e);for(t in e)e[t]=r.flattenErrorsToArray(e[t]);return e},constraint:function(e){var t;e=r.groupErrorsByAttribute(e);for(t in e)e[t]=e[t].map(function(n){return n.validator}).sort();return e}},h.exposeModule(h,this,f,g,b)}).call(C,o,a,null)})(j,T);const R=T,L=a=>a.toLocaleString(),k=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:a=>{a.onmouseenter=Swal.stopTimer,a.onmouseleave=Swal.resumeTimer}});document.addEventListener("DOMContentLoaded",function(){const a=document.querySelector(".recommendation-wall");a.style.cursor="grab";let o={top:0,left:0,x:0,y:0};const f=function(h){a.style.cursor="grabbing",a.style.userSelect="none",o={left:a.scrollLeft,top:a.scrollTop,x:h.clientX,y:h.clientY},document.addEventListener("mousemove",g),document.addEventListener("mouseup",b)},g=function(h){const r=h.clientX-o.x,e=h.clientY-o.y;a.scrollTop=o.top-e,a.scrollLeft=o.left-r},b=function(){a.style.cursor="grab",a.style.removeProperty("user-select"),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b)};a.addEventListener("mousedown",f)});let H=document.querySelector(".menuToggle"),I=document.querySelectorAll(".topBar-menu a"),A=document.querySelector(".topBar-menu");H.addEventListener("click",_);I.forEach(a=>{a.addEventListener("click",U)});function _(){A.classList.contains("openMenu")?A.classList.remove("openMenu"):A.classList.add("openMenu")}function U(){A.classList.remove("openMenu")}const v=window.config.customerApi,w=window.config.apiPath;let q=[],N=[];const M=document.querySelector(".productWrap"),G=document.querySelector(".productSelect"),O=document.querySelector(".shoppingCart-body"),D=document.querySelector(".shoppingCart-foot"),K=async()=>{try{q=(await E.get(`${v}/${w}/products`)).data.products,B(q)}catch(a){console.log(a)}},B=a=>{const o=a.map(f=>`
     <li class="productCard">
        <h4 class="productType">${f.category}</h4>
        <img src="${f.images}" alt="${f.title}">
        <a href="#" class="addCardBtn" data-id="${f.id}">加入購物車</a>
        <h3>${f.title}</h3>
        <del class="originPrice">NT$${L(f.origin_price)}</del>
        <p class="nowPrice">NT$${L(f.price)}</p>
     </li>`).join("");M.innerHTML=o};G.addEventListener("change",a=>{const o=a.target.value;if(o==="全部"){B(q);return}const f=q.filter(g=>g.category===o);B(f)});const S=async()=>{try{N=(await E.get(`${v}/${w}/carts`)).data,X(N)}catch(a){console.log(a)}},X=a=>{const o=a.carts.map(f=>`
      <tr>
              <td>
                <div class="cardItem-title">
                  <img src="${f.product.images}" alt="${f.product.title}">
                  <p>${f.product.title}</p>
                </div>
              </td>
              <td>NT$${L(f.product.price)}</td>
              <td>
              <button type="button" class="decreaseBtn" data-id="${f.id}" data-quantity="${f.quantity}">-</button>
              ${f.quantity}
              <button type="button" class="increaseBtn" data-id="${f.id}" data-quantity="${f.quantity}">+</button>
              </td>
              <td>NT$${L(f.product.price*f.quantity)}</td>
              <td class="discardBtn">
                <a href="#" class="material-icons" data-id="${f.id}">
                  clear
                </a>
              </td>
            </tr>
    `).join("");O.innerHTML=o,a.carts.length===0?D.innerHTML=`<tr>
    <td colspan='5' class='emptyCart'>
    購物車還沒有商品呦！
    </td>
    </tr>`:D.innerHTML=`
     <tr>
              <td>
                <a href="#" class="discardAllBtn">刪除所有品項</a>
              </td>
              <td></td>
              <td></td>
              <td>
                <p>總金額</p>
              </td>
              <td>NT$${L(a.finalTotal)}</td>
            </tr>
    `},J=async(a,o)=>{let f=1;const g=N.carts.find(h=>h.product.id===a);g&&(f=g.quantity+=1);const b={data:{productId:a,quantity:f}};try{await E.post(`${v}/${w}/carts`,b),k.fire({icon:"success",title:"成功加入購物車"}),S()}catch(h){console.log(h)}finally{o.classList.remove("disabled")}};M.addEventListener("click",a=>{a.preventDefault();const o=a.target;if(a.target.classList.contains("addCardBtn")){const f=a.target.getAttribute("data-id");o.classList.add("disabled"),J(f,o)}});const W=async(a,o,f)=>{const g={data:{id:a,quantity:o}};try{await E.patch(`${v}/${w}/carts`,g),f.classList.remove("disabled"),S()}catch(b){console.log(b)}finally{f.classList.remove("disabled")}};O.addEventListener("click",a=>{const o=a.target;if(!o.classList.contains("increaseBtn")&&!o.classList.contains("decreaseBtn"))return;const f=o.getAttribute("data-id");let g=parseInt(o.getAttribute("data-quantity"),10);if(o.classList.contains("increaseBtn"))g+=1;else if(o.classList.contains("decreaseBtn")){if(g<=1){P(f,o);return}g-=1}o.setAttribute("data-quantity",g),o.classList.add("disabled"),W(f,g,o)});const P=async(a,o)=>{try{await E.delete(`${v}/${w}/carts/${a}`),o.classList.remove("disabled"),S()}catch(f){console.log(f)}finally{o.classList.remove("disabled")}};O.addEventListener("click",a=>{a.preventDefault();const o=a.target;if(a.target.classList.contains("material-icons")){const f=a.target.getAttribute("data-id");o.classList.add("disabled"),P(f,o)}});const Y=async a=>{try{await E.delete(`${v}/${w}/carts`),a.classList.remove("disabled"),S()}catch(o){console.log(o)}finally{a.classList.remove("disabled")}};D.addEventListener("click",a=>{a.preventDefault();const o=a.target;if(a.target.classList.contains("discardAllBtn"))Swal.fire({title:"您確定要刪除所有品項?",text:"刪除後將無法恢復！",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"取消",confirmButtonText:"確定刪除"}).then(f=>{f.isConfirmed&&(Swal.fire({title:"已成功刪除所有品項",text:"購物車已清空",icon:"success"}),o.classList.add("disabled"),Y(o))});else return});const z=document.querySelector(".orderInfo-form"),V=()=>{const o=R(z,{姓名:{presence:{message:"是必填欄位"}},電話:{presence:{message:"是必填欄位"},format:{pattern:/^(09)[0-9]{8}$/,message:"號碼格式錯誤"}},Email:{presence:{message:"是必填欄位"},email:{message:"格式有誤"}},寄送地址:{presence:{message:"是必填欄位"},format:{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9\s,.-]{5,}$/,message:"請輸入詳細地址（包含街道、門牌號等）"}}});return console.log(o),Z(o),o},Z=a=>{Object.keys(a||{}).forEach(f=>{const g=document.querySelector(`[data-message="${f}"]`);g.textContent=a[f][0]})},Q=document.querySelectorAll("input[name]");Q.forEach(a=>{a.addEventListener("change",()=>{a.nextElementSibling.textContent="",V()})});const ee=async()=>{try{await E.post(`${v}/${w}/orders`,{data:{user:{name:document.querySelector("#customerName").value.trim(),tel:document.querySelector("#customerPhone").value.trim(),email:document.querySelector("#customerEmail").value.trim(),address:document.querySelector("#customerAddress").value.trim(),payment:document.querySelector("#tradeWay").value.trim()}}}),Swal.fire({icon:"success",title:"成功送出訂單",text:"感謝您的訂購！我們將盡快處理您的訂單。",confirmButtonText:"確定"}),z.reset(),S()}catch(a){console.log(a)}};z.addEventListener("submit",a=>{if(a.preventDefault(),N.carts.length===0){Swal.fire({icon:"warning",title:"購物車內無商品",text:"請先將商品加入購物車再送出訂單。",confirmButtonText:"確定"});return}V()||ee()});const te=()=>{K(),S()};te();
